# Отчет по приложению обработки изображений
**Автор:** Капарулин Тимофей P3308

## Общее описание приложения

Приложение представляет собой графический интерфейс для применения различных фильтров к изображениям. Оно построено на библиотеке Tkinter для интерфейса и Pillow (PIL) для обработки изображений.

## Архитектура приложения

### Основные компоненты:
1. **Класс App** - основной класс приложения
2. **Интерфейс** - кнопки и ползунки для управления
3. **Область отображения** - исходное и обработанное изображение
4. **Методы обработки** - функции для применения фильтров

## Подробное описание фильтров

### 1. Фильтр "Grey" (Оттенки серого)

**Принцип работы:**
- Проходит по каждому пикселю изображения
- Для каждого пикселя берет значения RGB (красный, зеленый, синий)
- Вычисляет среднее арифметическое: `gray = (R + G + B) / 3`
- Устанавливает все три канала равными этому значению: `(gray, gray, gray)`

**Код:**
```python
for y in range(h):
    for x in range(w):
        r, g, b, a = src[x, y]
        gray = (r + g + b) // 3
        dst[x, y] = (gray, gray, gray, a)
```

**Результат:** Цветное изображение превращается в черно-белое

### 2. Фильтр "Blur" (Размытие)

**Принцип работы:**
- Использует встроенный фильтр Gaussian Blur из библиотеки Pillow
- Радиус размытия задается ползунком (0-20 пикселей)
- Алгоритм Гаусса размывает каждый пиксель, смешивая его с соседними пикселями
- Чем больше радиус, тем сильнее размытие

**Код:**
```python
r = int(self.radius.get())
blurred = self.orig.filter(ImageFilter.GaussianBlur(radius=r))
```

**Результат:** Изображение становится размытым, детали сглаживаются

### 3. Фильтр "Contrast" (Контрастность)

**Принцип работы:**
Контраст - это разность между самыми светлыми и самыми темными областями изображения. Фильтр контраста изменяет эту разность, делая изображение более или менее выразительным.

**Математическая основа:**
Алгоритм контраста в Pillow основан на линейном преобразовании яркости пикселей:
```
новое_значение = (старое_значение - среднее) × фактор + среднее
```

Где:
- `среднее` - средняя яркость изображения (точка, относительно которой происходит растяжение/сжатие)
- `фактор` - коэффициент контраста от 0.0 до 3.0

**Технические детали:**
- Использует класс `ImageEnhance.Contrast` из библиотеки Pillow
- Фактор контраста задается ползунком в диапазоне 0.0-3.0
- Обработка происходит в цветовом пространстве RGB
- Альфа-канал обрабатывается отдельно для сохранения прозрачности

**Влияние различных значений фактора:**
- **Фактор = 0.0:** Изображение становится полностью серым (все пиксели приводятся к среднему значению)
- **Фактор = 0.5:** Контраст уменьшается в 2 раза (изображение становится блеклым)
- **Фактор = 1.0:** Изображение остается без изменений (исходный контраст)
- **Фактор = 1.5:** Контраст увеличивается в 1.5 раза (цвета становятся более насыщенными)
- **Фактор = 2.0:** Контраст удваивается (резкое различие между светлым и темным)
- **Фактор = 3.0:** Максимальное усиление контраста (может привести к потере деталей)

**Код реализации:**
```python
def apply_contrast(self):
    factor = float(self.contrast_factor.get())  # Получаем значение с ползунка
    
    # Разделяем RGB и альфа-канал для корректной обработки
    rgb = self.orig.convert("RGB")  # Конвертируем в RGB
    a = self.orig.getchannel("A")   # Извлекаем альфа-канал
    
    # Применяем контраст только к RGB каналам
    enhanced_rgb = ImageEnhance.Contrast(rgb).enhance(factor)
    
    # Объединяем обработанные RGB каналы с исходным альфа-каналом
    result = PILImage.merge("RGBA", (*enhanced_rgb.split(), a))
```

**Визуальные эффекты:**
- **Низкий контраст (< 1.0):** Изображение становится "плоским", детали менее различимы, цвета приглушенные
- **Высокий контраст (> 1.0):** Детали становятся более четкими, цвета насыщеннее, но может появиться "постеризация"
- **Экстремальные значения:** При очень высоких значениях светлые области могут стать чисто белыми, а темные - чисто черными

**Практическое применение:**
- Улучшение читаемости текста на изображениях
- Коррекция фотографий, снятых в условиях плохого освещения
- Создание художественных эффектов
- Подготовка изображений для печати

**Результат:** Изменяется разность между светлыми и темными областями, что влияет на общую выразительность и четкость изображения

### 4. Фильтр "Brightness" (Яркость)

**Принцип работы:**
- Использует класс `ImageEnhance.Brightness` из Pillow
- Фактор яркости задается ползунком (0.0-3.0)
- При факторе 1.0 яркость остается без изменений
- При факторе < 1.0 изображение затемняется
- При факторе > 1.0 изображение осветляется
- При факторе 0.0 изображение становится полностью черным

**Код:**
```python
factor = float(self.brightness_factor.get())
rgb = self.orig.convert("RGB")
a = self.orig.getchannel("A")
enhanced_rgb = ImageEnhance.Brightness(rgb).enhance(factor)
result = PILImage.merge("RGBA", (*enhanced_rgb.split(), a))
```

**Результат:** Общая яркость изображения увеличивается или уменьшается

### 5. Фильтр "Invert Colors" (Инверсия цветов)

**Принцип работы:**
- Проходит по каждому пикселю изображения
- Для каждого цветового канала применяет формулу: `новый_цвет = 255 - старый_цвет`
- Альфа-канал (прозрачность) остается без изменений
- Белый цвет (255) становится черным (0)
- Черный цвет (0) становится белым (255)
- Промежуточные цвета инвертируются пропорционально

**Код:**
```python
for y in range(h):
    for x in range(w):
        r, g, b, a = src[x, y]
        inv_r = 255 - r
        inv_g = 255 - g
        inv_b = 255 - b
        dst[x, y] = (inv_r, inv_g, inv_b, a)
```

**Результат:** Цвета изображения становятся противоположными (негатив)

## Технические особенности

### Работа с альфа-каналом
- Все фильтры сохраняют альфа-канал (прозрачность) изображения
- Для фильтров контраста и яркости RGB и альфа обрабатываются отдельно
- Это обеспечивает корректную работу с прозрачными изображениями

### Масштабирование изображения
- Изображения автоматически масштабируются для отображения (максимум 500x400 пикселей)
- Обработка всегда происходит с оригинальным изображением
- Используется высококачественный алгоритм LANCZOS для масштабирования

### Совместимость
- Код поддерживает разные версии библиотеки Pillow
- Автоматически выбирает подходящий алгоритм ресэмплинга

## Пользовательский интерфейс

### Организация элементов:
- **Первый ряд:** Кнопки Grey, Blur + ползунок радиуса
- **Второй ряд:** Кнопки Contrast, Brightness + их ползунки
- **Третий ряд:** Кнопка Invert Colors
- **Область изображений:** Исходное изображение слева, результат справа

### Принцип работы:
1. Пользователь настраивает параметры на ползунках
2. Нажимает соответствующую кнопку фильтра
3. Обработанное изображение отображается справа
4. Можно применять фильтры в любой последовательности

## Заключение

Приложение демонстрирует основные методы обработки изображений:
- **Попикельную обработку** (серый, инверсия)
- **Использование готовых фильтров** (размытие)
- **Применение математических преобразований** (контраст, яркость)

Каждый фильтр работает с исходным изображением, что позволяет экспериментировать с разными настройками без накопления артефактов от предыдущих обработок.